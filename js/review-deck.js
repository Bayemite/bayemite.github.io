(()=>{var e={444:()=>{let e=!1;function t(){if(!1===e){document.getElementsByClassName("topnav")[0].style.width="118px";let t=document.getElementById("hamburger");t.classList.remove("fa-bars"),t.classList.add("fa-close"),e=!0}else{document.getElementsByClassName("topnav")[0].style.width="0";let t=document.getElementById("hamburger");t.classList.add("fa-bars"),t.classList.remove("fa-close"),e=!1}}window.addEventListener("load",(function(){document.getElementById("hamburger").addEventListener("click",t)}))}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}(()=>{"use strict";n(444);class e{value;next;constructor(e){this.value=e}}class t{#e;#t;#n;constructor(){this.clear()}enqueue(t){const n=new e(t);this.#e?(this.#t.next=n,this.#t=n):(this.#e=n,this.#t=n),this.#n++}dequeue(){const e=this.#e;if(e)return this.#e=this.#e.next,this.#n--,e.value}clear(){this.#e=void 0,this.#t=void 0,this.#n=0}get size(){return this.#n}*[Symbol.iterator](){let e=this.#e;for(;e;)yield e.value,e=e.next}}const r={0:144e5,1:144e5,2:288e5,3:864e5,4:1728e5,5:6048e5,6:12096e5,7:2592e6,8:5184e6};function s(e){for(var t=1;t<arguments.length;t++)if(void 0===arguments[t])throw new TypeError("Failed to execute '"+e+"'. Missing argument(s).")}class i{constructor(e,t,n){if(this.name=e,this.description=t,this.cards=[],null!=n)for(let e=0;e<n.length;++e){let t=n[e],r=t.getElementsByClassName("question")[0].value,s=t.getElementsByClassName("answer")[0].value.trim();""!==r&&""!==s&&this.cards.push({q:r,ans:s,nextReview:0,stage:0})}}review(){return new a(this.cards)}static unserialise(e){s("loadFromJSON",e);let t=new i;return Object.assign(t,JSON.parse(e)),t}serialise(){return this.reviews=[],JSON.stringify(this)}}class a{constructor(e){s("ReviewSession constructor",e),this.reviewQueue=new t,this.summary={correct:[],wrong:[]},this.cards=e,this.current=null;let n=Date.now();for(let e=0;e<this.cards.length;++e){let t=this.cards[e];n>t.nextReview&&t.stage<=8&&this.reviewQueue.enqueue({card:this.cards[e],numWrong:0})}this.reviewQueue.size>0&&(this.current=this.reviewQueue.dequeue())}nextCard(){return null===this.current?null:this.current.card}logAns(e){if(s("logAns",e),this.done)return;let t=Date.now(),n=this.current.card,i=!1;if(e.trim()===n.ans)if(i=!0,this.current.numWrong>0){let e=n.stage>=5?2:1,t=n.stage-Math.ceil(this.current.numWrong/2*e);n.stage=t>0?t:1,this.summary.wrong.push(n)}else n.stage+=1,this.summary.correct.push(n);else this.reviewQueue.enqueue({card:n,numWrong:this.current.numWrong+1});return n.nextReview=function(e){let t=36e5;return Math.floor(e/t)*t}(t+r[n.stage]),0===this.reviewQueue.size?this.current=null:this.current=this.reviewQueue.dequeue(),i}}let l=null,o=null,u=null,c=null,d=!1,h=null,m=null,g=null,f=!1;function p(){if(!f){let e=localStorage.getItem("user-decks"),t=e?JSON.parse(e):[];t[o]=l.serialise(),localStorage.setItem("user-decks",JSON.stringify(t)),f=!0}}function v(e){if(13===(e.which||e.keyCode)){if(d)return h.removeAttribute("disabled"),void function(){if(c=u.nextCard(),null===c)return function(){let e=u.summary,t=document.getElementById("main-content"),n=function(e){if(0===e.length)return"";let t="<ul style='margin: 0;padding-left:1.5em;'>";for(let n of e)t+="<li>"+n.q+"</li>";return t+="</ul>",t},r=n(e.correct),s=n(e.wrong),i=e.correct.length+e.wrong.length;""==r&&(r="<p>No correct cards? One day...</p>"),""==s&&(s="<p>Yay! No incorrect cards.</p>"),t.classList.remove("center"),t.innerHTML="Finished studying <b>"+l.name+"</b>.<p><b>"+Math.round(e.correct.length/i*100)+"%</b> correct.</p><br><b>Correct cards</b>"+r+"<br><b>Wrong cards</b>"+s+"<br><a href='index.html'>Back to home?</a>",console.log(l)}(),void p();m.innerHTML=c.q,h.focus(),d=!1,g.innerHTML="",h.style.backgroundColor="",h.value=""}();let e=h.value;if(""===e)return;let t=u.logAns(e);h.style.backgroundColor=t?"#88CC00":"#FF0033",h.setAttribute("disabled",""),d=!0,g.innerHTML="Press enter for next card."}}window.onload=function(){document.body.onbeforeunload=function(){p()},document.body.addEventListener("keypress",v);let e=new URLSearchParams(window.location.search);o=e.get("deck-index"),function(e){let t=localStorage.getItem("user-decks"),n=t?JSON.parse(t):[];l=i.unserialise(n[e]);let r=document.getElementById("main-content");r.classList.add("center"),r.innerHTML="<p style='text-align: left;'><b>"+l.name+"</b></p>",0!==l.cards.length?(u=l.review(),c=u.nextCard(),null!==c?(r.innerHTML+="<p id='question'>"+c.q+"</p><input id='answer-input' placeholder='Answer' autocapitalize='none' autocomplete='off' autocorrect='off' spellcheck='false' autofocus><p id='msg'></p>",m=document.getElementById("question"),h=document.getElementById("answer-input"),g=document.getElementById("msg")):r.innerHTML+="<p>No cards ready for review.</p><a href='index.html'>Back to home page?</a>"):r.innerHTML+="<p>Interesting... there are no cards in this deck.</p><a href='index.html'>Back to home page?</a>"}(o)}})()})();