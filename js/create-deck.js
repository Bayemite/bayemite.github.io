(()=>{var e={444:()=>{let e=!1;function t(){if(!1===e){document.getElementsByClassName("topnav")[0].style.width="118px";let t=document.getElementById("hamburger");t.classList.remove("fa-bars"),t.classList.add("fa-close"),e=!0}else{document.getElementsByClassName("topnav")[0].style.width="0";let t=document.getElementById("hamburger");t.classList.add("fa-bars"),t.classList.remove("fa-close"),e=!1}}window.addEventListener("load",(function(){document.getElementById("hamburger").addEventListener("click",t)}))}},t={};function s(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,s),i.exports}(()=>{"use strict";s(444);class e{value;next;constructor(e){this.value=e}}class t{#e;#t;#s;constructor(){this.clear()}enqueue(t){const s=new e(t);this.#e?(this.#t.next=s,this.#t=s):(this.#e=s,this.#t=s),this.#s++}dequeue(){const e=this.#e;if(e)return this.#e=this.#e.next,this.#s--,e.value}clear(){this.#e=void 0,this.#t=void 0,this.#s=0}get size(){return this.#s}*[Symbol.iterator](){let e=this.#e;for(;e;)yield e.value,e=e.next}}const n={0:144e5,1:144e5,2:288e5,3:864e5,4:1728e5,5:6048e5,6:12096e5,7:2592e6,8:5184e6};function r(e){for(var t=1;t<arguments.length;t++)if(void 0===arguments[t])throw new TypeError("Failed to execute '"+e+"'. Missing argument(s).")}class i{constructor(e,t,s){if(this.name=e,this.description=t,this.cards=[],null!=s)for(let e=0;e<s.length;++e){let t=s[e],n=t.getElementsByClassName("question")[0].value,r=t.getElementsByClassName("answer")[0].value.trim();""!==n&&""!==r&&this.cards.push({q:n,ans:r,nextReview:0,stage:0})}}review(){return new a(this.cards)}static unserialise(e){r("loadFromJSON",e);let t=new i;return Object.assign(t,JSON.parse(e)),t}serialise(){return this.reviews=[],JSON.stringify(this)}}class a{constructor(e){r("ReviewSession constructor",e),this.reviewQueue=new t,this.summary={correct:[],wrong:[]},this.cards=e,this.current=null;let s=Date.now();for(let e=0;e<this.cards.length;++e){let t=this.cards[e];s>t.nextReview&&t.stage<=8&&this.reviewQueue.enqueue({card:this.cards[e],numWrong:0})}this.reviewQueue.size>0&&(this.current=this.reviewQueue.dequeue())}nextCard(){return null===this.current?null:this.current.card}logAns(e){if(r("logAns",e),this.done)return;let t=Date.now(),s=this.current.card,i=!1;if(e.trim()===s.ans)if(i=!0,this.current.numWrong>0){let e=s.stage>=5?2:1,t=s.stage-Math.ceil(this.current.numWrong/2*e);s.stage=t>0?t:1,this.summary.wrong.push(s)}else s.stage+=1,this.summary.correct.push(s);else this.reviewQueue.enqueue({card:s,numWrong:this.current.numWrong+1});return s.nextReview=function(e){let t=36e5;return Math.floor(e/t)*t}(t+n[s.stage]),0===this.reviewQueue.size?this.current=null:this.current=this.reviewQueue.dequeue(),i}}let l=null;function u(e){let t=e.getElementsByClassName("close-btn")[0],s=e.getElementsByClassName("question")[0],n=e.getElementsByClassName("answer")[0];t.addEventListener("click",(function(){!function(e){let t=document.getElementsByClassName("flashcard");if(1!=t.length)if(e===l)l=e.previousElementSibling,e.remove();else{let s=Number(e.getAttribute("data-id"))-1;for(e.remove();s<t.length;++s){let e=t[s];e.setAttribute("data-id",s+1),e.getElementsByTagName("label")[0].innerHTML="Card "+(s+1)}}}(t.parentNode)})),s.addEventListener("input",(function(){o(s.parentNode)})),n.addEventListener("input",(function(){o(n.parentNode)}))}function o(e){e===l&&function(){let e=l.cloneNode(!0),t=Number(l.getAttribute("data-id"))+1;e.setAttribute("data-id",t),e.getElementsByTagName("label")[0].innerHTML="Card "+t;for(let t of e.getElementsByTagName("textarea"))t.value="";u(e),l.insertAdjacentElement("afterend",e),l=e}()}function c(){let e=document.getElementById("deck-name").value;""===e&&(e="Unnamed Deck");let t=document.getElementById("deck-description").value,s=document.getElementsByClassName("flashcard"),n=new i(e,t,s),r=window.localStorage.getItem("user-decks");r=r?JSON.parse(r):[],r.push(n.serialise()),window.localStorage.setItem("user-decks",JSON.stringify(r)),console.log("Saved deck. Name: '"+n.name+"' to localStorage."),window.location.href="index.html"}window.onload=function(){l=document.getElementsByClassName("flashcard")[0],u(document.getElementById("firstcard")),document.getElementById("submitDeck").addEventListener("click",c)}})()})();